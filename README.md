# NACLfree



> NACLfree is an E-learning platform , online-storage compatible, built with the MERN(Mongo, Express, React and Node) Stack, with the purpose of providing courses to students all over the world.



[![Visual Studio Code](https://img.shields.io/badge/Visual_Studio_Code-0078D4?style=for-the-badge&logo=visual%20studio%20code&logoColor=white)](https://code.visualstudio.com/)
[![JS](https://img.shields.io/badge/JavaScript-F7DF1E?style=for-the-badge&logo=javascript&logoColor=black)](https://www.javascript.com/)
[![NodeJS](https://img.shields.io/badge/node.js-6DA55F?style=for-the-badge&logo=node.js&logoColor=white)](https://nodejs.org/en/)
[![Express.js](https://img.shields.io/badge/express.js-%23404d59.svg?style=for-the-badge&logo=express&logoColor=%2361DAFB)](https://expressjs.com)
[![React](https://img.shields.io/badge/React-20232A?style=for-the-badge&logo=react&logoColor=61DAFB)](https://reactjs.org)
[![MongoDB](https://img.shields.io/badge/MongoDB-%234ea94b.svg?style=for-the-badge&logo=mongodb&logoColor=white)](https://www.mongodb.com/home)
[![JWT](https://img.shields.io/badge/JWT-black?style=for-the-badge&logo=JSON%20web%20tokens)](https://jwt.io)
[![HTML](https://img.shields.io/badge/HTML5-E34F26?style=for-the-badge&logo=html5&logoColor=white)](https://whatwg.org)
[![CSS](https://img.shields.io/badge/CSS3-1572B6?style=for-the-badge&logo=css3&logoColor=white)](https://www.w3.org/Style/CSS/Overview.en.html)
[![SASS](https://img.shields.io/badge/Sass-CC6699?style=for-the-badge&logo=sass&logoColor=white)](https://sass-lang.com)
[![MUI](https://img.shields.io/badge/MUI-%230081CB.svg?style=for-the-badge&logo=mui&logoColor=white)](https://mui.com)
[![Bootstrap](https://img.shields.io/badge/Bootstrap-563D7C?style=for-the-badge&logo=bootstrap&logoColor=white)](https://breakdance.github.io/breakdance/)
[![Figma](https://img.shields.io/badge/Figma-F24E1E?style=for-the-badge&logo=figma&logoColor=white)](https://www.figma.com/)
[![Code Pen](https://img.shields.io/badge/Codepen-000000?style=for-the-badge&logo=codepen&logoColor=white)](https://codepen.io/trending)
[![Git](https://img.shields.io/badge/git-%23F05033.svg?style=for-the-badge&logo=git&logoColor=white)](https://git-scm.com)
[![GitHub](https://img.shields.io/badge/github-%23121011.svg?style=for-the-badge&logo=github&logoColor=white)](https://github.com)
[![Prettier](https://img.shields.io/badge/prettier-1A2C34?style=for-the-badge&logo=prettier&logoColor=F7BA3E)](https://prettier.io)
[![Youtube](https://img.shields.io/badge/YouTube-FF0000?style=for-the-badge&logo=youtube&logoColor=white)](https://www.youtube.com)



## Motivation

- To master the use of the MERN stack and 
- Learn how to work and collaborate within a team on GitHub
- To learn how to develop a software by following a specified set of requirments
- To develope a full website.


## Build Status
There were some problems with the project that you might encouter while working with the system. These problems are:
- For an instructor and a corporate trainee they cannot forget password, as they won't be having an email in the system.
-  Adminstrators cannot login to the system.
-  After a trainee rates a course, the rating won't be shown on the course's card or page.
-  If you didn't complete all of the signing up field, you wont see an error message, and you will be navigated to the login page giving the feeling of actuallu signing up.
-  Corporate trainees can request a course more than once and the request will be created multiple times and shown to the admin as multiple requests, and if accepted, the course will be shown on their profile multiple times.
-  When an admin creates a user password, it is shown on the page what the password will be.
-  Country selection doesnot show the currently selected country, but it changes the currency to the currently selected country.
-  Individual trainees can buy the course more the once, and it will be shown on their profile more than once.
-  Individual trainees can request a refund on the course and then access the content of the course while still waiting for the refund.





## Code Style

We used Model–View–Controller (MVC) which is a software architectural pattern, where we divide the code into Model which is the database schemas, View which is the frontend pages and components where all frontend is rendered and Controller which has all the methods and functions used connected with all the routes needed. We used prettier which is an opinionated code formatter, it enforces a consistent style by parsing the code and re-printing it with its own rules that take the maximum line length into account and wrapping code when necessary. Our naming convention was using names that uniquely identify the variable and/or the method while using also the Camel Case naming convention.


## ScreenShots

| Page Name |Screenshot |
| --- | --- | 
| Welcome Page |https://www.dropbox.com/s/03qg5juqjv40fni/welcomePage.png?dl=0&raw=1| 
| Course outline Page(1) | https://www.dropbox.com/s/8hsoymg12ei381k/Screen%20Shot%202023-01-06%20at%201.18.26%20AM.png?dl=0&raw=1|
| Course outline Page(2) | https://www.dropbox.com/s/4a2i57h5bxoeve0/Screen%20Shot%202023-01-06%20at%201.19.26%20AM.png?dl=0&raw=1|
| Course outline Page(3) | https://www.dropbox.com/s/0iqsy4jxl6rd62n/Screen%20Shot%202023-01-06%20at%201.22.03%20AM.png?dl=0&raw=1|
| SignUp Page | https://www.dropbox.com/s/1mc6xudqiuyxbua/signUp.png?dl=0&raw=1|
| Login| https://www.dropbox.com/s/fwjmw2z722wjs8i/Login.png?dl=0&raw=1|
| Instructor Page |https://www.dropbox.com/s/l9liusws1x3vuht/InstructorPage.png?dl=0&raw=1| 
| Add question/exam Page | https://www.dropbox.com/s/j2ldx399km8e620/questionsPage.png?dl=0&raw=1|
| Trainee Page |https://www.dropbox.com/s/f64mig9cd8z8hto/individualTraineePage.png?dl=0&raw=1| 
| Most viewed courses Part | https://www.dropbox.com/s/lufjyilb5l3akpm/mostViewedCourses.png?dl=0&raw=1|
| Course outline Page(individual trainee) | https://www.dropbox.com/s/40ynovlytg0mydc/Screen%20Shot%202023-01-06%20at%201.29.18%20AM.png?dl=0&raw=1|
| Pay for course Page | https://www.dropbox.com/s/umv1gzjz5xcsalp/payForCourse.png?dl=0&raw=1|
| Search Page | https://www.dropbox.com/s/rrc7bpr27hc1kkf/searchPage.png?dl=0&raw=1|
| Filter Part | https://www.dropbox.com/s/34o2322l3yrykyf/Filter.png?dl=0&raw=1|
| Subtitle Page | https://www.dropbox.com/s/3bwe8wv6up36c61/subtitlePage.png?dl=0&raw=1| 
| Notes Part | https://www.dropbox.com/s/f2an1qcgvo8jhjt/Screen%20Shot%202023-01-06%20at%201.24.21%20AM.png?dl=0&raw=1| 
| Admin set discount Page | https://www.dropbox.com/s/x81uehbwtm9637a/setPromotion.png?dl=0




## Tech/Framework

NACLfree uses a number of open source techs/frameworks to work properly:

- [Visual Studio Code](https://code.visualstudio.com/) -Code Editor
- [Javascript](https://www.javascript.com/) -Programming Language
- [NodeJS](https://nodejs.org/en/) - Evented I/O for the backend
- [Express.Js](https://expressjs.com) -Minimal, flexible and fast Node.js network app framework
- [ReactJS](https://reactjs.org) - HTML enhanced Javascript library for web apps
- [MongoDB](https://www.mongodb.com/home) - Database
- [JWT](https://jwt.io) -Library for JSON Web Tokens.
- [HTML5](https://whatwg.org) -Markup language used for structuring and presenting content.
- [CSS3](https://www.w3.org/Style/CSS/Overview.en.html) -Used for structuring, styling, and formatting web pages and react components.
- [SASS](https://sass-lang.com) - A more advanced and evolved variant of the CSS language
- [MUI](https://mui.com) - Great UI boilerplate for modern web apps
- [Bootstrap](https://breakdance.github.io/breakdance/) - Open source front-end development framework for modern web apps
- [Axios](https://axios-http.com) - Promise based HTTP client for the browser and node.js
- [Figma](https://www.figma.com/) - Great for seeing ready made templates and getting ideas
- [Codepen](https://codepen.io/trending) - Social development environment for front-end designers and developers.
- [Git](https://git-scm.com) -Distributed version control system
- [GitHub](https://github.com) -Server for uploading copies of a Git repository.
- [Prettier](https://prettier.io) -An opinionated code formatter


## Features

The system provides many features for different type of user.

#### A Guest Can
- View all courses available in the system.
- Select their country based view the corresponding price of courses.
- Search for a course based on instructor name/course name/subject.
- Filter searched results based on price/rating.
- Sign up and create an account.


#### An Admin Can
- Create corporate trainees/instructos/admins.
- View reported problems and mark them as pending/resolved.
- View courses access requests and grant ord decline access.
- View refund requests and accept or decline them.


#### An Instructor Can
- Login to the website using username and password.
- Search and filter all courses in the system.
- Create a new course and add new subtitles/videos/exam to the created course.
- Set promotion for any of their courses.
- View the ratings and reviews of their courses.
- Select their country based view the corresponding price of courses.
- View their salary.
- Report course related problems and follow up on them.


#### An Individual Trainee Can
- Login to the website using username and password.
- Search and filter all courses in the system.
- Rate an Instructor.
- Rate a Course.
- View outline of a course and buy this course.
- View all content of a course (videos/exams).
- Select their country based view the corresponding price of courses.
- Request a refund if course progress is less than 50%.
- Write and download notes while watching video.
- Receive a certificate after completing a course an download it as pdf.
- Receive an email to change password.
- Report course related problems and follow up on them.
- View their wallet to check for refunded courses.

#### A Corporate Trainee Can
- Login to the website using username and password.
- Search and filter all courses in the system.
- Rate an Instructor.
- Rate a Course.
- View outline of a course and request access to this course.
- View all content of a course (videos/exams).
- Write and download notes while watching video.
- Receive a certificate after completing a course an download it as pdf.
- Report course related problems and follow up on them.
- Report course related problems and follow up on them.







## Code Examples
#### Frontend
consists of many pages with different paths, and components are rendered inside pages
#### To create a new page, add a new route inside the routes with a specific path and the page that will be rendered. 


```javascript
import Page from './pages/Page';
function App(){
 return(
     <BrowserRouter>
        <Routes>
        <Route>
            path="/"
            element={<Page/>}
            />
            </Routes>
        </BrowserRouter>
)}
```
#### Create Component
``` javascript
function Component(){
    return(
            <div>
            </div>
    )
}
export default component;
```
#### Create a page and render component inside it
``` javascript
import Component from './Components/Component'
function Page(){
    reuturn(
        <div>
            <Component/>
        </div>
    )
}
export default Page
```
#### Backend Calls are made in Frontend pages to retrieve data and placed in useEffects in every page load


```javascript
useEffect(() => {
    const fetchCourses = async () => {
        const response = await axios.get('/courses');
    })
    fetchCourses();
}
``` 
to get all courses, use response.data in this case
### For sending data to the backend:
``` javascript
 await axios
      .post("http://localhost:8000/adminstrator/", {
        email,
        password,
      })
``` 

#### Backend
controller contains all the backend methods
``` javascript
const method = async (req,res) => {}
module.exports = {method}
``` 
server.js file contains all API requests and call the corresponding method
``` javascript
app.get("/",controller.method)
app.post("/instructorEditProfile",instructorController.editProfile)
``` 

## Controller Methods

### Sign up to be an Individual Trainee:
```javascript
app.post("/register", async (req, res) => {
  const { fName, lName, userName, email, pass, country, gender } = req.body;

  try {
    const salt = await bcrypt.genSalt();
    const hashedPassword = await bcrypt.hash(pass, salt);
    const user = await trainees.create({
      userName: userName,
      email: email,
      password: hashedPassword,
      firstName: fName,
      lastName: lName,
      country: country,
      gender: gender,
    });
    res.send({ mess: 'hi' })
  } catch (error) {
    res.send({ mess: error.message });
  }
});
```

- This method get all the required information to be registered from the Request.body . It the uses the npm package bcrypt to hash the password given and stores all the information in the Trainees database. If the creation of the Trainee fails for any given reason (connection, missing information, etc.), the method sends back the error message. 

### Logging in:
```javascript
app.post("/login", async (req, res) => {
  const { userName, pass } = req.body;
  const instructor = await instructors.findOne({ userName: userName });
  const trainee = await trainees.findOne({ userName: userName });
  
  if (trainee && (await bcrypt.compare(pass, trainee.password))) {
    const token = createToken(trainee._id);
    res.cookie("jwt", token);
    res.cookie("conversion", "24");
    res.cookie("code", "EGP");
    res.cookie("user", trainee._id);
    res.send({ mess: "", trainee });
  } else if (instructor && (await bcrypt.compare(pass, instructor.password))) {
    const token = createToken(instructor._id);
    res.cookie("jwt", token);
    res.cookie("conversion", "24");
    res.cookie("code", "EGP");
    res.cookie("user", instructor._id);
    res.send({ mess: "", instructor });
  } else {
    res.send({ mess: "user or pass incorrect" });
  }
});
```
- This method takes the username and password from the Request.body. It starts by searching in the database of the Trainee and Instructor for a match with te Request.body.userName. If it finds a match with the Trainees database , it compares the Request.body.pass with the hashedPassword of the match in the database using the npm package bcrypt. If they match, then we have a successful login. If not, it searches in the Instructors' database with the same steps. If neither are found, that means the entered username and password are incorrect. 

### Forget Password:
```javascript
app.get("/forgetPass", async (req, res) => {
  const { email } = req.query;
  if (
    (await instructors.findOne({ email: email })) ||
    (await trainees.findOne({ email: email }))
  ) {
    const transporter = nodemailer.createTransport({
      service: "gmail",
      auth: {
        user: "akarara2001@gmail.com",
        pass: "epaixfrltkfakrvl",
      },
    });

    const mailOptions = {
      from: "akarara2001@gmail.com",
      to: email,
      subject: "Password Change",
      html:
        "<p>Click <a href=http://localhost:3000/changePass?email=" +
        email +
        ">here</a> to reset your password</p>",
    };

    transporter.sendMail(mailOptions, function (error, info) {
      if (error) {
        console.log(error);
      } else {
        console.log("Email sent: " + info.response);
      }
    });
  } else {
    res.send({ mess: "there is not an account with this email" });
  }
});
```

- This method takes the email from the Request.query and searches for a match with that email in the database. If found, it then sends an email to that user with the link to reset his/her password. This is done using the npm package nodemailer. The email will be sent from akarara2001@gmail.com (The email of one of our team members for testing cases).

### Admin Controller

#### Method for creating a new Admin as the root admin:

```javascript
const createAdmin = async (req, res) => {
  const { email, password } = req.body;
  try {
    const salt = await bcrypt.genSalt();
    const hashedPassword = await bcrypt.hash(password, salt);
    const user = await admin.create({
      email: email,
      password: hashedPassword,
    });
    res.send(user);
  } catch (error) {
    res.status(400).json("email already used");
  }
};
```
- This method takes the email and password of the admin to be created from the Request.body and hashes the password so that it is encrypted and proceeds to create an admin with that info and store it in the database.

#### Method for getting the data of all the Admins:
```javascript
const getAdmins = async (req, res) => {
  const admins = await Admin.find({});
  res.send(admins);
};
```
- When called, this method gets the information of all the Admins currently in the database.

#### Method for getting all the problems submitted by the instructors and trainees:
```javascript
const viewProblemsAdmin = async (req, res) => {
  const unseenProblems = await problems
    .find({ $or:[ {status: "unseen" },{status: "pending" }]  })
    .populate("traineeID")
    .populate("instructorID");
  console.log(unseenProblems);
  res.send(unseenProblems);
};
```
- This method gets all the problems from the database that have not been seen by the admin yet or the ones that are pending (yet to be solved).

#### Method for marking a problem submitted by the instructor or trainee
```javascript
const markProblem = async (req, res) => {
  const { mark, problemID } = req.body;
  if (mark === "pending") {
    res.send(await problems.findByIdAndUpdate(problemID, { status: mark }));
  } else {
    await problems.findByIdAndDelete(problemID);
  }
};
```
- The problem ID and the mark which the admin has placed on the problem (solved or pending) are passed to the method through the Request.body and the problem is removed from the database if it marked as solved.

#### Method for placing discounts on courses:
```javascript 
const setDiscounts = async (req, res) => {
  const { courseNames, months, weeks, days, discount, dis } = req.body;
  const disc = 1 - discount / 100;
  const date = new Date();
  const totalDays =
    Duration.fromMonths(months).MilliSeconds +
    Duration.fromWeeks(weeks).MilliSeconds +
    Duration.fromDays(days).MilliSeconds;
  date.setMilliseconds(date.getMilliseconds() + totalDays);
  if (dis) {
    for (let i = 0; i < courseNames.length; i++) {
      const course = await courses.findOneAndUpdate(courseNames[i], {
        discount: disc,
        discountDuration: date,
      });
    }
  } else {
    await courses.updateMany(
      {},
      {
        discount: disc,
        discountDuration: date,
      }
    );
  }
  res.send(await courses.find({}));
};
```
- This method takes the name(s) of the course(s), the duration the admin wants the discount to last for(in weeks, days, and months), and the discount percentage (20%, 50%, ... etc.) from the Request.body . Then the duration is converted to milliseconds and added to the current date (also in milliseconds) then stored in the database plus the discount percentage so it can be multiplied with the original price of the course.


#### Method for viewing course requests:
```javascript
const viewRequests = async (req, res) => {
  const reqs = await courseReq
    .find({ status: "pending" })
    .populate({ path: "course" })
    .populate("user");
  res.send(reqs);
};
```
- This method gets all the course requests made by Corporate Trainees that are stil pending
(not accepted/rejected) from the database.

#### Method for accepting/rejecting a course request:
```javascript
const handleRequest = async (req, res) => {
  const { handle, reqID } = req.body;
  const request = await courseReq.findByIdAndDelete(reqID);
  const course = request.course;
  if (handle == "accept") {
    const trainee = await Trainee.findByIdAndUpdate(request.user, {
      $push: { courses: { course } },
    });
    res.send(trainee);
  } else {
    res.send("request declined");
  }
};
```
- This method takes the course request ID and the handle (accept/reject the course) from the Admin. If the handle is accept, the Corporate Trainee is given the course. Wether the course is  accepted or rejected, the course request is removed from the database.

#### Method for creating a new Instructor as an Admin
```javascript
const createInstructor = async (req, res) => {
  const { userName, password } = req.body;
  try {
    const salt = await bcrypt.genSalt();
    const hashedPassword = await bcrypt.hash(password, salt);
    const user = await instructor.create({
      userName: userName,
      password: hashedPassword
    });
    res.send(user);
  } catch (error) {
    res.send.json(error.message);
  }
};
```
- This method takes the username and password of the admin to be created from the Request.body and hashes the password so that it is encrypted and proceeds to create an admin with that info and store it in the database.

#### Method for getting the data of all the Instructors:
```javascript
const getInstructors = async (req, res) => {
  const instructors = await Instructor.find({});
  res.send(instructors);
};
```
- When called, this method gets the information of all the instructors currently in the database.

#### Method for creating a new Corporate Trainee as an Admin:
```javascript
const createTrainee = async (req, res) => {
  const { userName, password } = req.body;
  console.log(userName, password);
  try {
    const salt = await bcrypt.genSalt();
    const hashedPassword = await bcrypt.hash(password, salt);
    const user = await trainee.create({
      userName: userName,
      password: hashedPassword,
      type: "C",
      email: "",
    });
    res.send(user);
  } catch (error) {
    res.send(error.message);
  }
};
```
- This method takes the username and password of the Corporate Trainee to be created from the Request.body and hashes the password so that it is encrypted and proceeds to create an Corporate Trainee with that info and store it in the database.

#### Method for getting the data of all the Trainees:
```javascript
const getTrainees = async (req, res) => {
  const trainees = await Trainee.find({});
  res.send(trainees);
};
```
- When called, this method gets the information of all the Trainees (Corporate/Individual) currently in the database.



#### Method for getting all the Courses currently available on the Website:
```javascript
const displayAllCourses = async (req, res) => {
  const courses = await course.find().populate("instructorID");
  console.log(courses);
  res.send(courses);
};
```
- When called, this method gets information of all the courses currently on the website plus the information of the instructor that teaches that course.

### Instructor Controller

#### For uploading a video:
```javascript
    const uploadVideo = async (req, res) => {
        const { vname, vid, descr, subID } = req.body;
        const videoID = vid.substring(vid.length - 11, vid.length);
        var dur;
        const response = await axios
    .get(
      `https://www.googleapis.com/youtube/v3/videos?part=contentDetails&id=${videoID}&key=${apiKey}`
    )
    .then((res) => {
      const duration1 = res.data.items[0].contentDetails.duration;
      dur = Math.round(moment.duration(duration1).asMinutes());
    });
        const v = await video.create({
    name: vname,
    link: vid,
    description: descr,
    duration: dur,
    videoID: videoID,
  });
        const subt = await subtitle
        .findByIdAndUpdate(subID, {
      $push: { videos: mongoose.Types.ObjectId(v._id) },
    })
    .populate("videos");
         const newDur = subt.duration + dur;

  await subtitle
    .findByIdAndUpdate(subID, { duration: newDur })
    .populate("videos");
    const coursee = await course.findOne({ subtitle: subt });
    const newTotalHours = parseInt(course.totalHours) + newDur;
    await course.findByIdAndUpdate(coursee._id, { totalHours: newTotalHours });
    res.send(subt);
};
   ``` 
- This method takes the video name ,youtube link of the video, a short description of the video, and the ID of the subtitle that the video belongs to from the Request.body . It gets the duration of the youtube video by fetching the video details from the Youtube API using the Youtube video ID (id=${videoID}). Then it proceeds to save the video in the database and adds it to the list of videos of the subtitle it belongs to plus increasing the duration of that subtitle.


#### Get the course(s) given by a certain instructor

```javascript
const instructorViewCourses = async (req, res) => {
  id = req.query.id;
  const courses = await course.find({ instructorID: id })
  res.send(courses);
};
```
- This method takes the ID of the instructor from the Request.query and searches in the courses database for any course(s) having the instructor ID as the one in the Request.query. It finds any matches and sends them to the response.

#### Searching in the courses that I teach as an Instructor:
```javascript
const instructorSearchCourse = async (req, res) => {
  var result = await course
    .find({
      instructorID: req.query.id,
      courseName: req.query.search,
    })
    .populate({
      path: "rating",
      populate: {
        path: "traineeID",
      },
    });
  res.send(result);
};
```
- This method allows the instructor to search for a course in the list of courses that he teaches. The method takes the Instructor ID and the search query from the Request.query and searches for a match in the database with them.


#### Accepting the contract as an Instructor after my first sign-in:
```javascript
const acceptContract = async (req, res) => {
  const id = req.query.id;
  const inst = await instructor.findByIdAndUpdate(id, { contract: true });
  res.send(inst);
};
```
- This method sets the contract flag to true for the instructor with the ID matching with the ID from the Request.query. (It is called on the login page when the instructor is redirected to the contract after his first login to the website).

#### Getting all the reviews made on a certain Instructor:
```javascript
const getReview = async (req, res) => {
  const id = req.query.id;

  if (!mongoose.Types.ObjectId.isValid(id)) {
    return res.status(404).json({ error: "No Instructor is found" });
  }

  const rev = await rating.find({ instructorID: id }).populate("traineeID");
  if (!rev) {
    return res.status(404).json({ error: "No Review is found" });
  }
  console.log(rev);
  res.send(rev);
};
```
- This finds all the reviews made for a certain Instructor by searching in the reviews database for reviews having the Instructor ID the same as the we got from the Request.query


### Course Controller

### Filtering courses based  on subject and/or price and/or rating:
```javascript
exports.fil = async (req, res) => {
  var { pricee, sub, ratingg, courses } = req.body;
  var ids = [];
  const r = parseInt(ratingg);
  var result = [];
  var c = await course.find({});
  var subs = [];
  if (courses) {
    for (let c of courses) {
      ids.push(c._id);
    }
  }
  for (let s of c) {
    subs.push(s.subject);
  }
  if (
    courses.length > 0 &&
    (pricee.join() != [0, 0].join() || sub.join() != [].join() || ratingg != -1)
  ) {
    res.send(
      await course.find({
        _id: { $in: ids },
        price:
          pricee.join() != [0, 0].join()
            ? { $lte: pricee[1], $gt: pricee[0] }
            : { $lte: 500000 },
        subject: sub.join() != [].join() ? { $in: sub } : { $in: subs },
        averageRating:
          ratingg != -1 ? { $gte: ratingg, $lt: ratingg + 1 } : { $lte: 5 },
      })
    );
  } else if (
    pricee.join() != [0, 0].join() ||
    sub.join() != [].join() ||
    ratingg != -1
  ) {
    res.send(
      await course.find({
        price:
          pricee.join() != [0, 0].join()
            ? { $lte: pricee[1], $gt: pricee[0] }
            : { $lte: 500000 },
        subject: sub.join() != [].join() ? { $in: sub } : { $in: subs },
        averageRating:
          ratingg != -1 ? { $gte: ratingg, $lt: ratingg + 1 } : { $lte: 5 },
      })
    );
   
  }
```
- This method takes the price limit,the subject(s), and the rating that the courses will be filtered by. The extra "courses" in the Request.body is for if the courses to be filtered are not all of them , but a certain selection of them. The method then finds the matches in the database with the sent filters and sends them to the response.

### Creating a subtitle for a particular course:
```javascript
exports.createSubtitle = async (req, res) => {
  const sname = req.body.subtitleName;
  const courId = req.query.id;
  const newSubtitle = await subtitle.create({ name: sname });
  const cour = await course.updateOne(
    { _id: courId },
    { $push: { subtitles: mongoose.Types.ObjectId(newSubtitle._id) } }
  );

  const cours = await course.findOne({ _id: courId });

  res.send(cours);
};
```

- This method takes the name of the subtitle to be created from the Request.body and the ID of the course it belongs to from the Request.query. It creates a subtitle and stores it in the subtitles database then adds that subtitle to the list of subtitles of the course with the given ID.



### creating database models

#### Admin:

```javascript
const mongoose = require("mongoose");
const Schema = mongoose.Schema;

const adminSchema = new Schema({
  email: {
    type: String,
    required: false,
    unique: true,
  },

  password: {
    type: String,
    required: false,
  },
});
const admin = mongoose.model("Admin", adminSchema);
module.exports = admin;
``` 

#### Instructor:
```javascript
const instructorSchema = new Schema(
  {
    firstName: {
      type: String,
      required: false,
    },
    lastName: {
      type: String,
      required: false,
    },
    userName: {
      type: String,
      required: false,
      unique: true,
    },
    email: {
      type: String,
      required: false,
    },
    password: {
      type: String,
      required: false,
    },
    country: {
      type: String,
      required: false,
    },
    rating: {
      type: [Number],
      required: false,
    },
    type: {
      type: String,
      default: "T",
    },
    courses: {
      type: mongoose.Schema.Types.Array,
      ref: "Course",
    },
    photo: {
      type: String,
      required: false,
    },
    bio: {
      type: String,
      required: false,
    },
    contract: {
      type: Boolean,
      required: false,
    },
    salary: {
      type: Number,
      required: false,
    },
    averageRating: {
      type: Number,
      required: false,
    },
    contract: {
      type: Boolean,
      required: false,
      default: false,
    },
  },
  { timestamps: true }
);

const instructor = mongoose.model("Instructor", instructorSchema);
module.exports = instructor;
```

#### Trainee:
```javascript
const traineeSchema = new Schema(
  {
    firstName: {
      type: String,
      required: false,
    },
    lastName: {
      type: String,
      required: false,
    },
    userName: {
      type: String,
      unique: false,
      required: false,
    },
    email: {
      type: String,
      required: false,
      unique: false,
    },
    password: {
      type: String,
      required: false,
    },
    type: {
      type: String,
      enum: ["I", "C"],
      required: false,
    },
    company: {
      type: String,
      required: false,
    },
    photo: {
      type: String,
      required: false,
    },
    wallet: {
      type: Number,
      required: false,
    },
    courses: {
      type: mongoose.Schema.Types.Array,
      ref: "Course",
      required: false,
    },
    country: {
      type: String,
      required: false,
    },

    wallet: {
      type: Number,
      required: false,
    },
    gender: {
      type: String,
      enum: ["Male", "Female"],
      required: false,
    },
  },
  { timestamps: true }
);

const trainee = mongoose.model("Trainee", traineeSchema);
module.exports = trainee;
```

#### Course:
```javascript
const courseSchema = new Schema(
  {
    courseName: {
      type: String,
      required: false,
    },
    instructorID: {
      type: mongoose.Schema.Types.ObjectId,
      ref: "Instructor",
      required: false,
    },
    subtitles: {
      type: mongoose.Schema.Types.Array,
      ref: "Subtitle",
    },
    subscribers: {
      type: mongoose.Schema.Types.Array,
      ref: "Trainee",
    },
    price: {
      type: Number,
      required: false,
    },
    discount: {
      type: Number,
      default: 1,
      required: false,
    },
    discountDuration: {
      type: String,
      required: false,
    },
    subject: {
      type: String,
      required: false,
    },
    yearOfUpload: {
      type: String,
      required: false,
    },
    rating: {
      type: mongoose.Schema.Types.Array,
      ref: "RatingCourse",
      required: false,
    },
    certificate: {
      type: String,
      required: false,
    },
    totalHours: {
      type: String,
      required: false,
    },
    summary: {
      type: String,
      required: false,
    },
    previewVideo: {
      type: String,
      required: false,
    },
    views: {
      type: Number,
      required: false,
    },
    thumbnail: {
      type: String,
      required: false,
    },
    averageRating: {
      type: Number,
      required: false,
    },
  },
  { timestamps: true }
);

const course = mongoose.model("Course", courseSchema);
module.exports = course;
```

#### Subtitle:
```javascript
const subtitleSchema = new Schema({
  name: {
    type: String,
    required: false,
  },
  duration: {
    type: Number,
    required: false,
  },
  videos: {
    type: mongoose.Schema.Types.Array,
    ref: "Video",
  },
  exam: {
    type: mongoose.Schema.Types.ObjectId,
    ref: "Exam",
  },
});
```
#### Video:
```javascript
const videoSchema = new Schema({
  name: {
    type: String,
    required: false,
  },
  link: {
    type: String,
    required: false,
  },
  notes: {
    type: String,
    required: false,
  },
  duration: {
    type: String,
    required: false,
  },
  rating: {
    type: Number,
    required: false,
  },
  thumbnail: {
    type: String,
    required: false,
  },
  description: {
    type: String,
    required: false,
  },
  videoID: {
    type: String,
    required: false
  },
  done: {
    type: Boolean,
    required: false,
  },
});
```
#### Exam:
```javascript
const examSchema = new Schema(
  {
    courseID: {
      type: mongoose.Schema.Types.ObjectId,
      ref: "Course",
    },
    subtitle: {
      type: mongoose.Schema.Types.ObjectId,
      ref: "Subtitle",
    },
    done: {
      type: Boolean,
      required: false,
    },
    questions: {
      type: mongoose.Schema.Types.Array,
      ref: "Questions",
    },
  },
  { timestamps: true }
);
const exam = mongoose.model("Exam", examSchema);
module.exports =  exam;

```
#### Question:
```javascript
const questionsSchema = new Schema(
  {
  question: String,
  choice1: String,
  choice2: String,
  choice3: String,
  choice4: String,
  correctanswer: String,
  courseID: {
    type: mongoose.Schema.Types.ObjectId,
    ref: "Course",
  },
},
  { timestamps: true }
);
  
  const questions = mongoose.model("Questions", questionsSchema);
  module.exports =  questions;
```

#### Rating:
```javascript
const ratingSchema = new Schema({
  traineeID: {
    type: mongoose.Schema.Types.ObjectId,
    ref: "Trainee",
    required: false,
  },
  instructorID: {
    type: mongoose.Schema.Types.ObjectId,
    ref: "Instructor",
    required: false,
  },
  review: {
    type: String,
    required: false,
  },
  rate: {
    type: Number,
    required: false,
  },
});
const rating = mongoose.model("Rating", ratingSchema);
module.exports = rating;
```
#### Problem (Report a problem):
```javascript
const problemSchema = new Schema(
  {
    status: {
      type: String,
      enum: ['resolved', 'pending', 'unseen'],
      default: 'unseen'
    },
    traineeID: {
      type: mongoose.Schema.Types.ObjectId,
      ref: "Trainee",
    },
    instructorID: {
      type: mongoose.Schema.Types.ObjectId,
      ref: "Instructor",
    },
    description: {
      type: String,
      required: false,
    },
    courseID: {
      type: mongoose.Schema.Types.ObjectId,
      ref: "Course",
      required: false,
    },
    type: {
      type: String,
      required: false,
    },
    comments:
    {
      type: [String],
      required: false
    }
  },
  { timestamps: true }
);

const problem = mongoose.model("Problem", problemSchema);
module.exports = problem;
```



    
## Installation
- Install Visual Studio Code (Editor).
- Install Postman for API and routes testing.
NACLFree requires [Node.js](https://nodejs.org/) v10+ to run.

After cloning the repository you need to install the dependencies and start the server.

#### Installing the required packages:
- NPM package installer:
```sh
npm i -g npm
```
- React :
```sh
cd frontend
npm i react
```
- React-router-dom :
```sh
cd frontend
npm i react react-dom
```
- Nodemailer:
```sh
cd backend
npm i nodemailer
```
- Express:
```sh
cd backend
npm i express
```
- Cookie Parser:
```sh
cd backend
npm i cookie-parser
```
- CORS:
```sh
cd backend
npm i cors
```
- MUI:
```sh
cd frontend
npm i @mui/material @mui/styled-engine-sc styled-components
```
- Axios:
```sh
cd frontend
npm i axios
```
```sh
cd backend
npm i axios
```
- JSPDF:
```sh
cd frontend
npm i jspdf
```
- Notistack:
```sh
cd frontend
npm i notistack
 ```
 - SASS:
```sh
cd frontend
npm i sass
 ```
- React-country-region-selector:
```sh 
cd frontend
npm i react-country-region-selector
```
- React-youtube:
```sh
cd frontend
npm i react-youtube
```
- Bcrypt:
```sh
cd backend
npm i bcryptjs
```
- Body Parser:
```sh
cd backend 
npm i body-parser
```
- Connect Mongo:
```sh
cd backend
npm i connect-mongo
```
- Express-session:
```sh
cd backend
npm i express-session
```
- Google API:
```sh
cd backend 
npm i googleapis
```
- Jsonwebtoken:
```sh
cd backend
npm i jsonwebtoken
```
- Moment:
```sh
cd backend
npm i moment
```
- Moment Duration Format:
```sh
cd backend
npm i moment-duration-format
```
- Moment Duration Format:
```sh
cd backend
npm i mongoose
```
- Nodemon:
```sh
cd backend
npm i nodemon
```

#### Starting the project (Running)
- Start backend
```sh
cd backend
node app or nodemon app
```
- Start frontend
```sh
cd frontend
npm start
```

## API Reference
#### API Requests
These are the API requests that can be sent back to the backend in order to access pages or retreive data.

| HTTP Verbs | Endpoints | Action |
| --- | --- | --- |
| GET | /courses | To retrieve all courses on the platform |
| GET | /course?courseId | To retrieve all causes on the platform |
| GET | /instructorViewCourses?id | To retrieve a specific instructor's course on the patform|
| GET | /trainees | To retrieve all trainees on the platform |
| GET | /getTraineeDetails | To get details of a trainee |
| POST | /createCourse | To create a new course |
| POST | /login | To login an existing user account |
| POST | /register | To create a new user account |
| POST | /createSubtitle?id | To create a new subtitle |
| POST | /markProblem | To mark problem as solved or pending|
| POST | /setDiscount | To create a promotion on a specific course |
| POST | /handleReq | To grant access to user requesting a course |
| POST | /handleRefundReq | To either accept or reject refund request |
| POST | /admin | To create a new admin |
| POST | /instructor | To create a new instructor |
| POST | /trainee | To create a new corporate trainee |
| POST | /insertCreditCard | To insert a new credit card |
| POST | /rateCourse | To rate a course |
| POST | /uploadVideo | To upload a video to a subtitle |
| POST | /uploadPreview | To setting preview video for course |
| POST | /acceptContract | For instructor to accept contract for first login |
| POST | /reportProblem | To report a problem |
| POST | /addComment | To follow up on problem |
| POST | /traineeWriteNotes | To write notes in a specific video |
| POST | /traineeSendRequest | To request access to a course |
| POST | /grade | To solve an exam |
| POST | /payForACourse | To pay for a course |







Some API requests require the use of a id. These id are id/courseId/userId/subtitleId/videoId/examId, which you can get by navigating through the pages or autonomous after singing in/singing up. You can identify these requests in the above table, if the enpoint has "?" then it requires some id.


You may append the `id=[courseId/userId/SubtitleId/videoId/examId]` as a GET/POST parameter to authorize yourself to the API. But note that this is likely to leave traces in things like your history, if accessing the API through a browser.



```http
GET /course/?courseId=63851c4552d5434018c94b9c
```

| Parameter | Type | Description |
| :--- | :--- | :--- |
| `courseId` | `string` | **Required**.|




```http
GET /instructorViewCourses?id=638518c3898c88e0800b18f6
```

| Parameter | Type | Description |
| :--- | :--- | :--- |
| `id` | `string` | **Required**.(ID of instructior viewing his courses)|



```http
POST /createCourse
```

| Body | Type | Description |
| :--- | :--- | :--- |
| `courseName` | `string` | **Required**. (name of course being created)|
| `price` | `number` | **Required**.(price set by creator)|
| `thumbnail` | `string` | **Required**.(thumbnail of course)|
| `yearOfUpload` | `date` | **Required**.(year of upload)|
| `subject` | `string` | **Required**.(subject of the course)|
| `summary` | `string` | **Required**.(summary of the contents of the course)|
| `instructorID` | `string` | **Required**.(cookie to pass on the ID of the instructor creating the course)|




```http
POST /login	
```

|  Body | Type | Description |
| :--- | :--- | :--- |
| `userName` | `string` | **Required**.(username of user trying to login)|
| `pass` | `string` | **Required**.(password of user trying to login)|

```http
POST /register
```

| Body | Type | Description |
| :--- | :--- | :--- |
| `userName` | `string` | **Required**.(username for the account being created)|
| `email` | `string` | **Required**.(email of user creating an account)|
| `password` | `string` | **Required**.(password of user creating an account)||
| `firstName` | `string` | **Required**.(first name of user creating an account)||
| `lastName` | `string` | **Required**.(last name of user creating an account)||
| `country` | `string` | **Required**.(country of user creating an account)||
| `gender` | `string` | **Required**.(gender of user creating the account)|


```http
POST /createSubtitle?id	
```
| Parameter | Type | Description |
| :--- | :--- | :--- |
| `id` | `string` | **Required**.(id of course subtitle is being created in)|

|  Body | Type | Description |
| :--- | :--- | :--- |
| `name` | `string` | **Required**.(name of subtitle)|

```http
POST /markProblem	
```

|  Body | Type | Description |
| :--- | :--- | :--- |
| `mark` | `string` | **Required**.(new value of problem status)|
| `problemID` | `string` | **Required**.(ID of problem being marked)|

```http
POST /setDiscount	
```

|  Body | Type | Description |
| :--- | :--- | :--- |
| `courseID` | `string` | **Required**.(course getting the discount)|
| `months` | `number` | **Required**.(months set for discount)|
| `weeks` | `number` | **Required**.(weeks set for discount)|
| `days` | `number` | **Required**.(days set for discount)|
| `discount` | `number` | **Required**.(percentage of discount being set)|




```http
POST /handleReq	
```

|  Body | Type | Description |
| :--- | :--- | :--- |
| `handle` | `string` | **Required**.(action being performed on the request)|
| `reqID` | `string` | **Required**.(ID of access request)|

```http
POST /handleRefundReq	
```

|  Body | Type | Description |
| :--- | :--- | :--- |
| `handle` | `string` | **Required**.(action being performed on the request)|
| `reqID` | `string` | **Required**.(ID of refund request)|

```http
POST /admin	
```

|  Body | Type | Description |
| :--- | :--- | :--- |
| `email` | `string` | **Required**.(email or username of new admin being created)|
| `password` | `string` | **Required**.(password of new admin being created)|

```http
POST /instructor	
```

|  Body | Type | Description |
| :--- | :--- | :--- |
| `email` | `string` | **Required**.(email or username of new instructor being created)|
| `password` | `string` | **Required**.(password of new instructor being created)|

```http
POST /trainee	
```

|  Body | Type | Description |
| :--- | :--- | :--- |
| `email` | `string` | **Required**.(email or username of new corporate trainee being created)|
| `password` | `string` | **Required**.(password of new corporate trainee being created)|

```http
POST /insertCreditCard	
```

|  Body | Type | Description |
| :--- | :--- | :--- |
| `number` | `number` | **Required**.(number of credit card)|
| `ccv` | `number` | **Required**.(ccv of credit card)|
| `exp` | `date` | **Required**.(expiry date of credit card)|



```http
POST /uploadVideo	
```

|  Body | Type | Description |
| :--- | :--- | :--- |
| `vname` | `string` | **Required**.(name of video)|
| `vid` | `string` | **Required**.(URL of video)|
| `descr` | `string` | **Required**.(description of video)|
| `subID` | `string` | **Required**.(ID of subtitle video is being uploaded to)|


```http
POST /rateCourse	
```

|  Body | Type | Description |
| :--- | :--- | :--- |
| `rating` | `number` | **Required**.(value of rating out of 5)|

```http
POST /uploadPreview	
```

|  Body | Type | Description |
| :--- | :--- | :--- |
| `link` | `string` | **Required**.(link of video)|
| `cId` | `string` | **Required**.(course ID of for video to be uploaded to)|

```http
POST /reportProblem	
```

|  Body | Type | Description |
| :--- | :--- | :--- |
| `type` | `string` | **Required**.(type of problem)|
| `description` | `string` | **Required**.(course ID of for video to be uploaded to)|
| `id` | `string` | **Required**.(id of trainee reporting problem )|
| `courseID` | `string` | **Required**.(course ID of the problem)|


```http
POST /addComment	
```

|  Body | Type | Description |
| :--- | :--- | :--- |
| `comment` | `string` | **Required**.(comment to be added)|
| `problemID` | `string` | **Required**.(problem ID of follow up)|

```http
POST /grade	
```

|  Body | Type | Description |
| :--- | :--- | :--- |
| `grade` | `numeber` | **Required**.(grade of exam solved)|


#### Responses

All API endpoints return the JSON representation of the resources created or edited, and the platform returns a JSON response in the following format:

```javascript
{
  "message" : String,
  "status" : Number,
  "statusText": String,
  "data": String
}
```

The `message` attribute contains a message commonly used to indicate errors or, in the case of deleting a resource, success that the resource was properly deleted.

The `status` attribute describes if the transaction was successful or not.

The `data` attribute contains any other metadata associated with the response. This will be an escaped string containing JSON data.

#### Status Codes

The platform returns the following status codes in its API:

| Status | StatusText |
| :--- | :--- |
| 200 | `OK` |
| 400 | `BAD REQUEST` |
| 404 | `NOT FOUND` |
| 500 | `INTERNAL SERVER ERROR` |

#### APIs Used
- ExchangeRate API : https://v6.exchangerate-api.com
- Youtube API : https://www.googleapis.com/youtube/v3

## Tests

### The backend methods were tested using postman ~ https://www.postman.com

### Url Test: http://localhost:8000/adminstrator/instructor
### Mehtod Type : POST
### Body:
choose raw then JSON then write in the body:
   ```javascript
   {
    "userName": "Levi",
    "password": "1234"
}
```
  
###   Expected Output:
   ```javascript
   {
    "userName": "Levi",
    "password": "$2a$10$jAR74Mf/Hx9eAkqzrU3FF.zDN2mCNHrfWG0ijMRTCDQ4OVWJLjEfC",
    "rating": [],
    "type": "T",
    "courses": [],
    "contract": false,
    "salary": 0,
    "_id": "63b75deebad1e4dcc4d73acd",
    "createdAt": "2023-01-05T23:31:58.833Z",
    "updatedAt": "2023-01-05T23:31:58.833Z",
    "__v": 0
}
```
### Expected Response:
| Status | StatusText |
| :--- | :--- |
| 200 | `OK` |

### Url Test: http://localhost:8000/adminstrator/admin
### Mehtod Type : POST
### Body:
choose raw then JSON then write in the body:
   ```javascript
   {
    "email": "seif@yahoo.com",
    "password": "12345"
}
``` 
###   Expected Output:
   ```javascript
{
    "email": "seif@yahoo.com",
    "password": "$2a$10$ZFNfkte4WpbKDd8.f3x5teiE4PNTUTlEGwstywG.YOXF9BggOdSA6",
    "_id": "63b7648fbad1e4dcc4d73ad8",
    "__v": 0
}
```
### Expected Response:
| Status | StatusText |
| :--- | :--- |
| 200 | `OK` |

### Url Test: http://localhost:8000/adminstrator/instructor
### Mehtod Type : POST
### Body:
choose raw then JSON then write in the body:
 ```javascript
{
    "userName": "sehs",
    "password": "123456"
}
``` 
###   Expected Output:
   ```javascript
{
    "userName": "sehs",
    "password": "$2a$10$.ntmfDaWFP8ftHPSoKnRF.Iu0IiCDLzJL7g4I.j7LhmugWxcGT4kS",
    "rating": [],
    "type": "T",
    "courses": [],
    "contract": false,
    "salary": 0,
    "_id": "63b764e5bad1e4dcc4d73adb",
    "createdAt": "2023-01-06T00:01:41.168Z",
    "updatedAt": "2023-01-06T00:01:41.168Z",
    "__v": 0
}
```
### Expected Response:
| Status | StatusText |
| :--- | :--- |
| 200 | `OK` |

### Url Test: http://localhost:8000/adminstrator/viewProblemsAdmin
### Mehtod Type : GET
###   Expected Output:
   ```javascript
[
    {
        "_id": "63b6c5deb1173c1362091194",
        "status": "unseen",
        "traineeID": null,
        "description": "7aga raheeba bsara7a",
        "courseID": "63851c4552d5434018c94b9c",
        "type": "Financial",
        "comments": [
            "hello ya left",
            "2olt zeft"
        ],
        "createdAt": "2023-01-05T12:43:10.161Z",
        "updatedAt": "2023-01-05T12:44:22.733Z",
        "__v": 0
    },
    {
        "_id": "63b6c67ab1173c1362091209",
        "status": "unseen",
        "traineeID": null,
        "description": "3ala fekra ba2a keda mish nafe3",
        "courseID": "63851c4552d5434018c94b9c",
        "type": "Technical",
        "comments": [],
        "createdAt": "2023-01-05T12:45:46.163Z",
        "updatedAt": "2023-01-05T12:45:46.163Z",
        "__v": 0
    }
]
```
### Expected Response:
| Status | StatusText |
| :--- | :--- |
| 200 | `OK` |

### Url Test: http://localhost:8000/register
### Mehtod Type : POST
### Body:
choose raw then JSON then write in the body:
   ```javascript
   {
{
    "userName":"kimo",
    "email":"kimo@gmail.com",
    "pass":"1234",
    "firtName":"Karim",
    "lastName":"Karim",
    "country":"Egypt",
    "gender":"Male"
}
}
```
  
###   Expected Output:
   ```javascript
  {
    "mess": "hi"
}
```
### Expected Response:
| Status | StatusText |
| :--- | :--- |
| 200 | `OK` |

### Url Test: http://localhost:8000/login
### Mehtod Type : POST
### Body:
choose raw then JSON then write in the body:
   ```javascript
   {
    "userName": "Hamb",
    "pass": "1234"
}
```
  
###   Expected Output:
   ```javascript
   {
    "mess": "",
    "instructor": {
        "_id": "638518c3898c88e0800b18f6",
        "firstName": "Ham",
        "lastName": "Boli",
        "userName": "Hamb",
        "email": "seif.borhan@yahoo.com",
        "password": "$2a$10$D4UvkDQJ87vFJlzb0XjmX.45N5lgSm0.qTSxGExrLc3T5h3dig/pi",
        "country": "Egypt",
        "rating": [],
        "courses": [],
        "bio": "loooooollll",
        "createdAt": "2022-11-28T20:23:31.162Z",
        "updatedAt": "2023-01-05T12:59:10.746Z",
        "__v": 0,
        "contract": true,
        "photo": "https://preview.redd.it/8f3ceu6epnl71.jpg?width=640&crop=smart&auto=webp&s=110353674c82e0a6d1e29a326924186ce8a57202",
        "salary": 112,
        "averageRating": 3.5,
        "type": "T"
    }
}
```
### Expected Response:
| Status | StatusText |
| :--- | :--- |
| 200 | `OK` |

### Url Test: http://localhost:8000/rateCourse?id=63b75be974fffa2c7a569ae1
### Mehtod Type : POST
### Body:
choose raw then JSON then write in the body:
   ```javascript
   {
    "rating": 4,
    "course": "63b5f4375850882313f0cc0f",
    "enteredReview":"Nice"
    
}
``` 
###   Expected Output:
   ```javascript
{
    "_id": "63b5f4375850882313f0cc0f",
    "courseName": "World Cup",
    "instructorID": "63b5f3015850882313f0cbd4",
    "subtitles": [
        "63b5f4505850882313f0cc25",
        "63b5f5625850882313f0cc53"
    ],
    "subscribers": [
        "63b5d9958c239b889ef962ab",
        "63b75be974fffa2c7a569ae1"
    ],
    "price": 200,
    "discount": 0.8,
    "subject": "Winner",
    "yearOfUpload": "2022",
    "rating": [
        "63b5f8e59f66c18318e96302",
        "63b768b2b884a0cfdbfd4010"
    ],
    "totalHours": 4,
    "summary": "How to win the World Cup by beating France in the final!",
    "thumbnail": "https://library.sportingnews.com/styles/twitter_card_120x120/s3/2022-11/World-Cup-trophy-stylized-images-%233-%2816x9%29.jpg?itok=EVK4Dnsx",
    "averageRating": 4.5,
    "createdAt": "2023-01-04T21:48:39.790Z",
    "updatedAt": "2023-01-06T00:17:54.541Z",
    "__v": 0,
    "discountDuration": "Tue Jun 06 2023 17:00:38 GMT+0200 (Eastern European Standard Time)",
    "previewVideo": "https://www.youtube.com/embed/l0wyytJXRQ4"
}   
```
### Expected Response:
| Status | StatusText |
| :--- | :--- |
| 200 | `OK` |

### Url Test: http://localhost:8000/rateInstructor?id=63b75be974fffa2c7a569ae1
### Mehtod Type : POST
### Body:
choose raw then JSON then write in the body:
   ```javascript
{
    {
    "rating": 5,
    "enteredReview":"GOAT",
    "instructor": "63b5f3015850882313f0cbd4"
    
}
}
``` 
###   Expected Output:
   ```javascript

   {
    "_id": "63b5f3015850882313f0cbd4",
    "userName": "messi",
    "password": "$2a$10$BwBZMxI4gv0uGk/0odBESOqUzHCw9QtOxWZb7sS36i.9B8dmpEUI6",
    "rating": [],
    "type": "T",
    "courses": [],
    "contract": true,
    "salary": 260,
    "createdAt": "2023-01-04T21:43:29.691Z",
    "updatedAt": "2023-01-06T00:21:29.020Z",
    "__v": 0,
    "bio": "GOAT",
    "email": "hussein.hassan409@gmail.com",
    "firstName": "Leo",
    "lastName": "Messi",
    "photo": "https://pbs.twimg.com/media/FIBM3TOVcAAmhJl.jpg:large",
    "averageRating": 5
}

```
### Expected Response:
| Status | StatusText |
| :--- | :--- |
| 200 | `OK` |

### Url Test: http://localhost:8000/courseRatings?id=63b5f4375850882313f0cc0f
### Mehtod Type : GET
###   Expected Output:
   ```javascript
[
    {
        "_id": "63b5f8e59f66c18318e96302",
        "traineeID": "63b5d9958c239b889ef962ab",
        "courseID": "63b5f4375850882313f0cc0f",
        "review": "QATAR",
        "rate": 5,
        "__v": 0
    },
    {
        "_id": "63b768b2b884a0cfdbfd4010",
        "traineeID": "63b75be974fffa2c7a569ae1",
        "courseID": "63b5f4375850882313f0cc0f",
        "review": "Nice",
        "rate": 4,
        "__v": 0
    }
]
```
### Expected Response:
| Status | StatusText |
| :--- | :--- |
| 200 | `OK` |

### Url Test: http://localhost:8000/courseEdit?courseId=63b5f4375850882313f0cc0f
### Mehtod Type : GET
###   Expected Output:
   ```javascript
{
    "courses": {
        "_id": "63b5f4375850882313f0cc0f",
        "courseName": "World Cup",
        "instructorID": {
            "_id": "63b5f3015850882313f0cbd4",
            "userName": "messi",
            "password": "$2a$10$BwBZMxI4gv0uGk/0odBESOqUzHCw9QtOxWZb7sS36i.9B8dmpEUI6",
            "rating": [],
            "type": "T",
            "courses": [],
            "contract": true,
            "salary": 260,
            "createdAt": "2023-01-04T21:43:29.691Z",
            "updatedAt": "2023-01-06T00:21:29.020Z",
            "__v": 0,
            "bio": "GOAT",
            "email": "hussein.hassan409@gmail.com",
            "firstName": "Leo",
            "lastName": "Messi",
            "photo": "https://pbs.twimg.com/media/FIBM3TOVcAAmhJl.jpg:large",
            "averageRating": 5
        },
        "subtitles": [
            {
                "_id": "63b5f4505850882313f0cc25",
                "name": "Saudi Arabia 2-1",
                "duration": 2,
                "videos": [
                    {
                        "_id": "63b5f48a5850882313f0cc32",
                        "name": "Lost to Saudi Arabia",
                        "link": "https://www.youtube.com/watch?v=8FUr-jwJyrA",
                        "duration": "2",
                        "description": "How to lose to Saudi Arabia 2-1 in World Cup opening match for Argentina ",
                        "videoID": "8FUr-jwJyrA",
                        "__v": 0
                    }
                ],
                "__v": 0,
                "exam": "63b5f5395850882313f0cc4b"
            },
            {
                "_id": "63b5f5625850882313f0cc53",
                "name": "Mexico 2-0",
                "duration": 2,
                "videos": [
                    {
                        "_id": "63b5f59d5850882313f0cc67",
                        "name": "Win against Mexico",
                        "link": "https://www.youtube.com/watch?v=DVaJusaBkMs",
                        "duration": "2",
                        "description": "How to win 2-0 against Mexico without an effort ",
                        "videoID": "DVaJusaBkMs",
                        "__v": 0
                    }
                ],
                "__v": 0,
                "exam": "63b5f60c5850882313f0cc80"
            }
        ],
        "subscribers": [
            "63b5d9958c239b889ef962ab",
            "63b75be974fffa2c7a569ae1"
        ],
        "price": 200,
        "discount": 0.8,
        "subject": "Winner",
        "yearOfUpload": "2022",
        "rating": [
            {
                "_id": "63b5f8e59f66c18318e96302",
                "traineeID": null,
                "courseID": "63b5f4375850882313f0cc0f",
                "review": "QATAR",
                "rate": 5,
                "__v": 0
            },
            {
                "_id": "63b768b2b884a0cfdbfd4010",
                "traineeID": {
                    "_id": "63b75be974fffa2c7a569ae1",
                    "firstName": "Seif",
                    "lastName": "BorhanEldin",
                    "userName": "seif",
                    "email": "seif.borhan@hotmail.com",
                    "password": "$2a$10$lUmqeSGnISsWZmnkiKgx/uViybmLGkJWIQ2JoMtxIKV1nQYNTubbq",
                    "type": "I",
                    "courses": [
                        "63b5f4375850882313f0cc0f"
                    ],
                    "gender": "Male",
                    "createdAt": "2023-01-05T23:23:21.610Z",
                    "updatedAt": "2023-01-05T23:23:51.807Z",
                    "__v": 0
                },
                "courseID": "63b5f4375850882313f0cc0f",
                "review": "Nice",
                "rate": 4,
                "__v": 0
            }
        ],
        "totalHours": 4,
        "summary": "How to win the World Cup by beating France in the final!",
        "thumbnail": "https://library.sportingnews.com/styles/twitter_card_120x120/s3/2022-11/World-Cup-trophy-stylized-images-%233-%2816x9%29.jpg?itok=EVK4Dnsx",
        "averageRating": 4.5,
        "createdAt": "2023-01-04T21:48:39.790Z",
        "updatedAt": "2023-01-06T00:17:54.541Z",
        "__v": 0,
        "discountDuration": "Tue Jun 06 2023 17:00:38 GMT+0200 (Eastern European Standard Time)",
        "previewVideo": "https://www.youtube.com/embed/l0wyytJXRQ4"
    },
    "ratings": [
        {
            "_id": "63b5f8e59f66c18318e96302",
            "traineeID": null,
            "courseID": "63b5f4375850882313f0cc0f",
            "review": "QATAR",
            "rate": 5,
            "__v": 0
        },
        {
            "_id": "63b768b2b884a0cfdbfd4010",
            "traineeID": {
                "_id": "63b75be974fffa2c7a569ae1",
                "firstName": "Seif",
                "lastName": "BorhanEldin",
                "userName": "seif",
                "email": "seif.borhan@hotmail.com",
                "password": "$2a$10$lUmqeSGnISsWZmnkiKgx/uViybmLGkJWIQ2JoMtxIKV1nQYNTubbq",
                "type": "I",
                "courses": [
                    "63b5f4375850882313f0cc0f"
                ],
                "gender": "Male",
                "createdAt": "2023-01-05T23:23:21.610Z",
                "updatedAt": "2023-01-05T23:23:51.807Z",
                "__v": 0
            },
            "courseID": "63b5f4375850882313f0cc0f",
            "review": "Nice",
            "rate": 4,
            "__v": 0
        }
    ],
    "subtitles": [
        {
            "_id": "63b5f4505850882313f0cc25",
            "name": "Saudi Arabia 2-1",
            "duration": 2,
            "videos": [
                {
                    "_id": "63b5f48a5850882313f0cc32",
                    "name": "Lost to Saudi Arabia",
                    "link": "https://www.youtube.com/watch?v=8FUr-jwJyrA",
                    "duration": "2",
                    "description": "How to lose to Saudi Arabia 2-1 in World Cup opening match for Argentina ",
                    "videoID": "8FUr-jwJyrA",
                    "__v": 0
                }
            ],
            "__v": 0,
            "exam": "63b5f5395850882313f0cc4b"
        },
        {
            "_id": "63b5f5625850882313f0cc53",
            "name": "Mexico 2-0",
            "duration": 2,
            "videos": [
                {
                    "_id": "63b5f59d5850882313f0cc67",
                    "name": "Win against Mexico",
                    "link": "https://www.youtube.com/watch?v=DVaJusaBkMs",
                    "duration": "2",
                    "description": "How to win 2-0 against Mexico without an effort ",
                    "videoID": "DVaJusaBkMs",
                    "__v": 0
                }
            ],
            "__v": 0,
            "exam": "63b5f60c5850882313f0cc80"
        }
    ]
}
```
### Expected Response:
| Status | StatusText |
| :--- | :--- |
| 200 | `OK` |

### Url Test: http://localhost:8000/courses
### Mehtod Type : GET
###   Expected Output:
   ```javascript
[
    {
        "_id": "63851c4552d5434018c94b9c",
        "courseName": "React Introduction",
        "instructorID": {
            "_id": "638518c3898c88e0800b18f6",
            "firstName": "Ham",
            "lastName": "Boli",
            "userName": "Hamb",
            "email": "seif.borhan@yahoo.com",
            "password": "$2a$10$D4UvkDQJ87vFJlzb0XjmX.45N5lgSm0.qTSxGExrLc3T5h3dig/pi",
            "country": "Egypt",
            "rating": [],
            "courses": [],
            "bio": "loooooollll",
            "createdAt": "2022-11-28T20:23:31.162Z",
            "updatedAt": "2023-01-05T12:59:10.746Z",
            "__v": 0,
            "contract": true,
            "photo": "https://preview.redd.it/8f3ceu6epnl71.jpg?width=640&crop=smart&auto=webp&s=110353674c82e0a6d1e29a326924186ce8a57202",
            "salary": 112,
            "averageRating": 3.5,
            "type": "T"
        },
        "subtitles": [
            "63b5e1e8399c1a38328495cb"
        ],
        "subscribers": [
            "63b5d9958c239b889ef962ab"
        ],
        "price": 70,
        "discount": 0.8,
        "discountDuration": "Tue Jun 06 2023 17:00:38 GMT+0200 (Eastern European Standard Time)",
        "subject": "Web Development",
        "yearOfUpload": "2022",
        "certificate": "",
        "totalHours": 12,
        "summary": "This is a desciprtion for you to learn more abou this course.",
        "previewVideo": "https://www.youtube.com/embed/NASK0AU_Cdk",
        "views": 0,
        "createdAt": "2022-11-28T20:38:29.132Z",
        "updatedAt": "2023-01-05T13:00:38.194Z",
        "__v": 0,
        "thumbnail": "https://www.kindpng.com/picc/m/17-176068_atom-symbol-react-native-icon-png-transparent-png.png",
        "rating": [
            "63b5df1aaf361b04ed37c058",
            "63b6c3feb1173c1362091142",
            "63b6c437b1173c136209116e",
            "63b6c473b1173c1362091175"
        ],
        "averageRating": 3.75
    },
    {
        "_id": "63b5f4375850882313f0cc0f",
        "courseName": "World Cup",
        "instructorID": {
            "_id": "63b5f3015850882313f0cbd4",
            "userName": "messi",
            "password": "$2a$10$BwBZMxI4gv0uGk/0odBESOqUzHCw9QtOxWZb7sS36i.9B8dmpEUI6",
            "rating": [],
            "type": "T",
            "courses": [],
            "contract": true,
            "salary": 260,
            "createdAt": "2023-01-04T21:43:29.691Z",
            "updatedAt": "2023-01-06T00:21:29.020Z",
            "__v": 0,
            "bio": "GOAT",
            "email": "hussein.hassan409@gmail.com",
            "firstName": "Leo",
            "lastName": "Messi",
            "photo": "https://pbs.twimg.com/media/FIBM3TOVcAAmhJl.jpg:large",
            "averageRating": 5
        },
        "subtitles": [
            "63b5f4505850882313f0cc25",
            "63b5f5625850882313f0cc53"
        ],
        "subscribers": [
            "63b5d9958c239b889ef962ab",
            "63b75be974fffa2c7a569ae1"
        ],
        "price": 200,
        "discount": 0.8,
        "subject": "Winner",
        "yearOfUpload": "2022",
        "rating": [
            "63b5f8e59f66c18318e96302",
            "63b768b2b884a0cfdbfd4010"
        ],
        "totalHours": 4,
        "summary": "How to win the World Cup by beating France in the final!",
        "thumbnail": "https://library.sportingnews.com/styles/twitter_card_120x120/s3/2022-11/World-Cup-trophy-stylized-images-%233-%2816x9%29.jpg?itok=EVK4Dnsx",
        "averageRating": 4.5,
        "createdAt": "2023-01-04T21:48:39.790Z",
        "updatedAt": "2023-01-06T00:17:54.541Z",
        "__v": 0,
        "discountDuration": "Tue Jun 06 2023 17:00:38 GMT+0200 (Eastern European Standard Time)",
        "previewVideo": "https://www.youtube.com/embed/l0wyytJXRQ4"
    }
]
```
### Expected Response:
| Status | StatusText |
| :--- | :--- |
| 200 | `OK` |

### Url Test: http://localhost:8000/instructorViewCourses?id=638518c3898c88e0800b18f6
### Mehtod Type : GET
###   Expected Output:
   ```javascript
[
    {
        "_id": "63851c4552d5434018c94b9c",
        "courseName": "React Introduction",
        "instructorID": "638518c3898c88e0800b18f6",
        "subtitles": [
            "63b5e1e8399c1a38328495cb"
        ],
        "subscribers": [
            "63b5d9958c239b889ef962ab"
        ],
        "price": 70,
        "discount": 0.8,
        "discountDuration": "Tue Jun 06 2023 17:00:38 GMT+0200 (Eastern European Standard Time)",
        "subject": "Web Development",
        "yearOfUpload": "2022",
        "certificate": "",
        "totalHours": 12,
        "summary": "This is a desciprtion for you to learn more abou this course.",
        "previewVideo": "https://www.youtube.com/embed/NASK0AU_Cdk",
        "views": 0,
        "createdAt": "2022-11-28T20:38:29.132Z",
        "updatedAt": "2023-01-05T13:00:38.194Z",
        "__v": 0,
        "thumbnail": "https://www.kindpng.com/picc/m/17-176068_atom-symbol-react-native-icon-png-transparent-png.png",
        "rating": [
            {
                "_id": "63b5df1aaf361b04ed37c058",
                "traineeID": "63b5d9958c239b889ef962ab",
                "courseID": "63851c4552d5434018c94b9c",
                "review": "This Course is amazinggggg!!!",
                "rate": 3,
                "__v": 0
            },
            {
                "_id": "63b6c3feb1173c1362091142",
                "traineeID": "63b6c0a7b1173c136209106e",
                "courseID": "63851c4552d5434018c94b9c",
                "review": "yow",
                "rate": 4,
                "__v": 0
            },
            {
                "_id": "63b6c437b1173c136209116e",
                "traineeID": "63b6c0a7b1173c136209106e",
                "courseID": "63851c4552d5434018c94b9c",
                "review": "jjj",
                "rate": 4,
                "__v": 0
            },
            {
                "_id": "63b6c473b1173c1362091175",
                "traineeID": "63b6c0a7b1173c136209106e",
                "courseID": "63851c4552d5434018c94b9c",
                "review": "ffff",
                "rate": 4,
                "__v": 0
            }
        ],
        "averageRating": 3.75
    }
]
```
### Expected Response:
| Status | StatusText |
| :--- | :--- |
| 200 | `OK` |

### Url Test: http://localhost:8000/instructorChangePassword?id=63b5f3015850882313f0cbd4
### Mehtod Type : POST
### Body:
choose raw then JSON then write in the body:
   ```javascript
{
    "pass":"1234",
    "oldPass":"123"
}
``` 
###   Expected Output:
   ```javascript
{
    "mess": "password changed successfully"
}
```
### Expected Response:
| Status | StatusText |
| :--- | :--- |
| 200 | `OK` |

### Url Test: http://localhost:8000/instructorViewRate?id=638518c3898c88e0800b18f6
### Mehtod Type : GET
###   Expected Output:
   ```javascript
[
    {
        "_id": "63b5df0aaf361b04ed37c052",
        "traineeID": null,
        "instructorID": "638518c3898c88e0800b18f6",
        "review": "He is very good",
        "rate": 3,
        "__v": 0
    },
    {
        "_id": "63b6c417b1173c1362091149",
        "traineeID": null,
        "instructorID": "638518c3898c88e0800b18f6",
        "review": "gggg",
        "rate": 4,
        "__v": 0
    }
]
```
### Expected Response:
| Status | StatusText |
| :--- | :--- |
| 200 | `OK` |

### Url Test: http://localhost:8000/viewSalary?id=638518c3898c88e0800b18f6
### Mehtod Type : GET
###   Expected Output:
   ```javascript
{
    "_id": "638518c3898c88e0800b18f6",
    "firstName": "Ham",
    "lastName": "Boli",
    "userName": "Hamb",
    "email": "seif.borhan@yahoo.com",
    "password": "$2a$10$D4UvkDQJ87vFJlzb0XjmX.45N5lgSm0.qTSxGExrLc3T5h3dig/pi",
    "country": "Egypt",
    "rating": [],
    "courses": [],
    "bio": "loooooollll",
    "createdAt": "2022-11-28T20:23:31.162Z",
    "updatedAt": "2023-01-05T12:59:10.746Z",
    "__v": 0,
    "contract": true,
    "photo": "https://preview.redd.it/8f3ceu6epnl71.jpg?width=640&crop=smart&auto=webp&s=110353674c82e0a6d1e29a326924186ce8a57202",
    "salary": 14.583333333333334,
    "averageRating": 3.5,
    "type": "T"
}
```
### Expected Response:
| Status | StatusText |
| :--- | :--- |
| 200 | `OK` |

### Url Test: http://localhost:8000/reportProblem
### Mehtod Type : POST
### Body:
choose raw then JSON then write in the body:
   ```javascript
  {
    "type":"technical" ,
    "description": "bad",
    "id" :"638518c3898c88e0800b18f6",
    "courseID": "63851c4552d5434018c94b9c"
}
``` 
###   Expected Output:
   ```javascript
{
    "status": "unseen",
    "instructorID": "638518c3898c88e0800b18f6",
    "description": "bad",
    "courseID": "63851c4552d5434018c94b9c",
    "type": "technical",
    "comments": [],
    "_id": "63b775e46eff3c58d9550650",
    "createdAt": "2023-01-06T01:14:12.485Z",
    "updatedAt": "2023-01-06T01:14:12.485Z",
    "__v": 0
}
```
### Expected Response:
| Status | StatusText |
| :--- | :--- |
| 200 | `OK` |

### Url Test: http://localhost:8000/addComment
### Mehtod Type : POST
### Body:
choose raw then JSON then write in the body:
   ```javascript
 {
    "comment":"very Bad" ,
    "problemID": "63b776a96eff3c58d9550654"
}
``` 
###   Expected Output:
   ```javascript
{
    "_id": "63b776a96eff3c58d9550654",
    "status": "unseen",
    "instructorID": "638518c3898c88e0800b18f6",
    "description": "bad",
    "courseID": "63851c4552d5434018c94b9c",
    "type": "technical",
    "comments": [
        "very Bad"
    ],
    "createdAt": "2023-01-06T01:17:29.594Z",
    "updatedAt": "2023-01-06T01:18:50.295Z",
    "__v": 0
}
```
### Expected Response:
| Status | StatusText |
| :--- | :--- |
| 200 | `OK` |

### Url Test: http://localhost:8000/viewProblems?id=638518c3898c88e0800b18f6
### Mehtod Type : GET
###   Expected Output:
   ```javascript
[
    {
        "_id": "63b775e46eff3c58d9550650",
        "status": "unseen",
        "instructorID": "638518c3898c88e0800b18f6",
        "description": "bad",
        "courseID": "63851c4552d5434018c94b9c",
        "type": "technical",
        "comments": [],
        "createdAt": "2023-01-06T01:14:12.485Z",
        "updatedAt": "2023-01-06T01:14:12.485Z",
        "__v": 0
    },
    {
        "_id": "63b776a96eff3c58d9550654",
        "status": "unseen",
        "instructorID": "638518c3898c88e0800b18f6",
        "description": "bad",
        "courseID": "63851c4552d5434018c94b9c",
        "type": "technical",
        "comments": [
            "very Bad"
        ],
        "createdAt": "2023-01-06T01:17:29.594Z",
        "updatedAt": "2023-01-06T01:18:50.295Z",
        "__v": 0
    }
]
```
### Expected Response:
| Status | StatusText |
| :--- | :--- |
| 200 | `OK` |

### Url Test: http://localhost:8000/viewAnswerstrainee?course=63b5f4375850882313f0cc0f&exam=63b5f60c5850882313f0cc80
### Mehtod Type : GET
###   Expected Output:
   ```javascript
[
    {
        "_id": "63b5f60b5850882313f0cc77",
        "question": "Who scored the first goal?",
        "choice1": "Messi",
        "choice2": "Enzo",
        "choice3": "DiMaria",
        "choice4": "Mac",
        "correctanswer": "Messi",
        "courseID": "63b5f4375850882313f0cc0f",
        "createdAt": "2023-01-04T21:56:27.650Z",
        "updatedAt": "2023-01-04T21:56:27.650Z",
        "__v": 0
    },
    {
        "_id": "63b5f60b5850882313f0cc7a",
        "question": "who scored the second goal?",
        "choice1": "Messi",
        "choice2": "DiMaria",
        "choice3": "Enzo",
        "choice4": "Mac",
        "correctanswer": "Enzo",
        "courseID": "63b5f4375850882313f0cc0f",
        "createdAt": "2023-01-04T21:56:27.786Z",
        "updatedAt": "2023-01-04T21:56:27.786Z",
        "__v": 0
    },
    {
        "_id": "63b5f60b5850882313f0cc7c",
        "question": "who was the player of the match?",
        "choice1": "Messi",
        "choice2": "DiMaria",
        "choice3": "Enzo",
        "choice4": "Mohamed Salah",
        "correctanswer": "Messi",
        "courseID": "63b5f4375850882313f0cc0f",
        "createdAt": "2023-01-04T21:56:27.929Z",
        "updatedAt": "2023-01-04T21:56:27.929Z",
        "__v": 0
    },
    {
        "_id": "63b5f60c5850882313f0cc7e",
        "question": "what was the name of the stadium ?",
        "choice1": "Al Bayt",
        "choice2": "Lussail",
        "choice3": "974",
        "choice4": "Al Madina",
        "correctanswer": "Lussail",
        "courseID": "63b5f4375850882313f0cc0f",
        "createdAt": "2023-01-04T21:56:28.060Z",
        "updatedAt": "2023-01-04T21:56:28.060Z",
        "__v": 0
    }
]
```
### Expected Response:
| Status | StatusText |
| :--- | :--- |
| 200 | `OK` |

### Url Test: http://localhost:8000/viewProgress?traineeId=63b75be974fffa2c7a569ae1&id=63b5f4375850882313f0cc0f
### Mehtod Type : GET
###   Expected Output:
   ```javascript
50
```
### Expected Response:
| Status | StatusText |
| :--- | :--- |
| 200 | `OK` |

### Url Test: http://localhost:8000/traineeSendRequest?id=63b6d05c51a700fc413a59a4&course=63b5f4375850882313f0cc0f
### Mehtod Type : POST
### Body:
choose raw then JSON then write in the body:
   ```javascript
 {
    "user":"63b6d05c51a700fc413a59a4",
    "course":"63b5f4375850882313f0cc0f",
    "status": "pending" 
}
```
###   Expected Output:
   ```javascript
{
    "user": "63b6d05c51a700fc413a59a4",
    "course": "63b5f4375850882313f0cc0f",
    "status": "pending",
    "_id": "63b8193d572279238f1cfe97",
    "__v": 0
}
```
### Expected Response:
| Status | StatusText |
| :--- | :--- |
| 200 | `OK` |

### Url Test: http://localhost:8000/refundReq?id=63b75be974fffa2c7a569ae1&courseID=63b5f4375850882313f0cc0f
### Mehtod Type : GET
###   Expected Output:
   ```javascript
refund could not be made, you have watched/viewed more than 50% of the course
```
### Expected Response:
| Status | StatusText |
| :--- | :--- |
| 200 | `OK` |

### Url Test: http://localhost:8000/traineeView?id=63b75be974fffa2c7a569ae1
### Mehtod Type : GET
###   Expected Output:
   ```javascript
{
    "_id": "63b75be974fffa2c7a569ae1",
    "firstName": "Seif",
    "lastName": "BorhanEldin",
    "userName": "seif",
    "email": "seif.borhan@hotmail.com",
    "password": "$2a$10$lUmqeSGnISsWZmnkiKgx/uViybmLGkJWIQ2JoMtxIKV1nQYNTubbq",
    "type": "I",
    "courses": [
        {
            "_id": "63b5f4375850882313f0cc0f",
            "courseName": "World Cup",
            "instructorID": {
                "_id": "63b5f3015850882313f0cbd4",
                "userName": "messi",
                "password": "$2a$10$BwBZMxI4gv0uGk/0odBESOqUzHCw9QtOxWZb7sS36i.9B8dmpEUI6",
                "rating": [],
                "type": "T",
                "courses": [],
                "contract": true,
                "salary": 260,
                "createdAt": "2023-01-04T21:43:29.691Z",
                "updatedAt": "2023-01-06T00:21:29.020Z",
                "__v": 0,
                "bio": "GOAT",
                "email": "hussein.hassan409@gmail.com",
                "firstName": "Leo",
                "lastName": "Messi",
                "photo": "https://pbs.twimg.com/media/FIBM3TOVcAAmhJl.jpg:large",
                "averageRating": 5
            },
            "subtitles": [
                "63b5f4505850882313f0cc25",
                "63b5f5625850882313f0cc53"
            ],
            "subscribers": [
                "63b5d9958c239b889ef962ab",
                "63b75be974fffa2c7a569ae1"
            ],
            "price": 200,
            "discount": 0.8,
            "subject": "Winner",
            "yearOfUpload": "2022",
            "rating": [
                "63b5f8e59f66c18318e96302",
                "63b768b2b884a0cfdbfd4010"
            ],
            "totalHours": 4,
            "summary": "How to win the World Cup by beating France in the final!",
            "thumbnail": "https://library.sportingnews.com/styles/twitter_card_120x120/s3/2022-11/World-Cup-trophy-stylized-images-%233-%2816x9%29.jpg?itok=EVK4Dnsx",
            "averageRating": 4.5,
            "createdAt": "2023-01-04T21:48:39.790Z",
            "updatedAt": "2023-01-06T00:17:54.541Z",
            "__v": 0,
            "discountDuration": "Tue Jun 06 2023 17:00:38 GMT+0200 (Eastern European Standard Time)",
            "previewVideo": "https://www.youtube.com/embed/l0wyytJXRQ4"
        }
    ],
    "gender": "Male",
    "createdAt": "2023-01-05T23:23:21.610Z",
    "updatedAt": "2023-01-05T23:23:51.807Z",
    "__v": 0
}
```
### Expected Response:
| Status | StatusText |
| :--- | :--- |
| 200 | `OK` |

### Url Test: http://localhost:8000/subtitles?id=63b5f5625850882313f0cc53
### Mehtod Type : GET
###   Expected Output:
   ```javascript
{
    "vids": [
        {
            "_id": "63b5f59d5850882313f0cc67",
            "name": "Win against Mexico",
            "link": "https://www.youtube.com/watch?v=DVaJusaBkMs",
            "duration": "2",
            "description": "How to win 2-0 against Mexico without an effort ",
            "videoID": "DVaJusaBkMs",
            "__v": 0
        }
    ],
    "exs": {
        "_id": "63b5f60c5850882313f0cc80",
        "courseID": "63b5f4375850882313f0cc0f",
        "questions": [
            "63b5f60b5850882313f0cc77",
            "63b5f60b5850882313f0cc7a",
            "63b5f60b5850882313f0cc7c",
            "63b5f60c5850882313f0cc7e"
        ],
        "createdAt": "2023-01-04T21:56:28.214Z",
        "updatedAt": "2023-01-04T21:56:28.214Z",
        "__v": 0
    }
}
```
### Expected Response:
| Status | StatusText |
| :--- | :--- |
| 200 | `OK` |

### Url Test: http://localhost:8000/exam?id=63b5f60c5850882313f0cc80
### Mehtod Type : GET
###   Expected Output:
   ```javascript
[
    {
        "_id": "63b5f60b5850882313f0cc77",
        "question": "Who scored the first goal?",
        "choice1": "Messi",
        "choice2": "Enzo",
        "choice3": "DiMaria",
        "choice4": "Mac",
        "correctanswer": "Messi",
        "courseID": "63b5f4375850882313f0cc0f",
        "createdAt": "2023-01-04T21:56:27.650Z",
        "updatedAt": "2023-01-04T21:56:27.650Z",
        "__v": 0
    },
    {
        "_id": "63b5f60b5850882313f0cc7a",
        "question": "who scored the second goal?",
        "choice1": "Messi",
        "choice2": "DiMaria",
        "choice3": "Enzo",
        "choice4": "Mac",
        "correctanswer": "Enzo",
        "courseID": "63b5f4375850882313f0cc0f",
        "createdAt": "2023-01-04T21:56:27.786Z",
        "updatedAt": "2023-01-04T21:56:27.786Z",
        "__v": 0
    },
    {
        "_id": "63b5f60b5850882313f0cc7c",
        "question": "who was the player of the match?",
        "choice1": "Messi",
        "choice2": "DiMaria",
        "choice3": "Enzo",
        "choice4": "Mohamed Salah",
        "correctanswer": "Messi",
        "courseID": "63b5f4375850882313f0cc0f",
        "createdAt": "2023-01-04T21:56:27.929Z",
        "updatedAt": "2023-01-04T21:56:27.929Z",
        "__v": 0
    },
    {
        "_id": "63b5f60c5850882313f0cc7e",
        "question": "what was the name of the stadium ?",
        "choice1": "Al Bayt",
        "choice2": "Lussail",
        "choice3": "974",
        "choice4": "Al Madina",
        "correctanswer": "Lussail",
        "courseID": "63b5f4375850882313f0cc0f",
        "createdAt": "2023-01-04T21:56:28.060Z",
        "updatedAt": "2023-01-04T21:56:28.060Z",
        "__v": 0
    }
]
```
### Expected Response:
| Status | StatusText |
| :--- | :--- |
| 200 | `OK` |

 All the routes have been thoroughly tested manually with different inputs to ensure that they and their given controller methods are functioning as they should. Be sure to email us if you find any bugs/errors!

## Contribute 
#### To contribute to our project, you can add the following features.


- System could allow an individual/corporate trainee to see his/her grade from previous exam or exercise he/she already did.
- System could allow an individual/corporate trainee to retake an exercise (or exam) if he/she failed it BEFORE viewing the answers to the exam/ exercise.
- System could allow an instructor to see the average mark scored on the exercises/ exams in his/her course.
- System could allow an instructor to see the total number of students enrolled in his/her course.
- System could allow an individual/corporate trainee to edit his/her review of an instrcutor or a course.
- System could allow an individual/corporate trainee to delete his/her review of an instrcutor or a course.
- System could allow an individual/corporate trainee to ask the course instructor questions about his/ her course after registering for it.
- System could allow an individual/corporate trainee to view the replies of instructors to his/her questions.
- System could allow an instructor to view the questions asked by the trainees and answer them.
- System could allow an instructor to save his/her progress in creating a course without publishing the course.
- System could allow an instructor to publish his/her course.However, A published course cannot be edited nor deleted.
- System could allow an instructor to edit or delete a non published course.
- System could allow an instructor to close a published course by preventing more trainees from enrolling in it. This means trainees who are not registered in it cannot see it but those who are registered in it already can see it and access all the content normally. This is done when courses become outdated.
- system could let indiviudal trainee use stripe api when paying for a course.


## How to use
#### As A Guest You Can
1. View all courses in the welcome page by scrolling down in the page, and can choose your country from the select country component in the navigation bar, in-order to preview the price in realtion to your country's currency.
2. Search for a course by clicking on the search button in the home page an typing in the course name/subject/instructor name.
3. Filter the searched results by price or rating or subject.
4. Click on the course to preview all details about the course and watch its preview video.
5. Signup by clicking on the signup button in the navigation bar, and then write your information, accpet the terms and click the signup button to create an account.
6. Login by typing in your username, password and clicking on login button.

#### As An Individual Trainee You Can
1. View all courses in the welcome page by scrolling down in the page, and can choose your country from the select country component in the navigation bar, in-order to preview the price in realtion to your country's currency.
2. Login using email and password by clicking on the login button in the navigation bar, and then write your email and password and click login to be prompted to the home page.
3. Search for a course by clicking on the search button in the home page an typing in the course name/subject/instructor name.
4. Filter the searched results by price or rating or subject.
5. Click on the course to preview all details about the course and watch its preview video.
6. Buy a course by clicking on the buy now button in the outline page, typing in your credit card details and clicking on the procced to pay button.
7. See all your bought courses in your profile, by clicking on the profile tab or the avatar icon in the navigation bar, then clicking on courses tab in the side bar inside your profile page.
8. Watch any video, solve any exam inside any of your courses by clicking on your course, and then choosing the subtitle from the side bar, and clicking on the video/exam.
9. Write notes and download them as a pdf while watching a video, by typing inside the text field of notes and clicking on download notes as pdf button.
10. Request a refund for a course if you didn't watch 50% of its content, by going inside your course and clicking on the request refund button and then accept to sending a request.
11. Report a problem within a course by clicking on report a problem inside the course and choosing the problem type (Techincal/Financial/Other), typing in your problem and the clicking report to report the problem to the admins.
11. Rate a course by clicking on the rate this course (Stars) button that is on you course card inside yor profile page, and typing your review then submitting it.
13. Rate an instructor by clicking on the instructor name on the course card presented in your profile page and typing in your review then submitting it.
14. View all previously submitted problems by clicking on problems tab in the side bar inside your profile page.
15. Follow up on an unresolved problem, by typing in your comment and clicking on add comment button in the problem card to add your follow up.
16. View your refunded courses' amounts in your profile page represented as wallet icon under your name.
17. Receive a certificate via mail and download it after you fully complete the course.
18. Logout by clicking on the logout tab in the side bar inside your profile page.

#### As A Corporate Trainee You Can
1. View all courses in the welcome page by scrolling down in the page.
2. Login using username and password by clicking on the login button in the navigation bar, and then write your username and password and click login to be prompted to the home page.
3. Search for a course by clicking on the search button in the home page an typing in the course name/subject/instructor name.
4. Filter the searched results by price or rating or subject.
5. Click on the course to preview all details about the course and watch its preview video.
6. Request access to a course by clicking on the get access button in the outline page, confirming that you want to request access.
7. See all your courses in your profile, by clicking on the profile tab or the avatar icon in the navigation bar, then clicking on courses tab in the side bar inside your profile page.
8. Watch any video, solve any exam inside any of your courses by clicking on your course, and then choosing the subtitle from the side bar, and clicking on the video/exam.
9. Write notes and download them as a pdf while watching a video, by typing inside the text field of notes and clicking on download notes as pdf button.
10. Report a problem within a course by clicking on report a problem inside the course and choosing the problem type (Techincal/Financial/Other), typing in your problem and the clicking report to report the problem to the admins.
11. Rate a course by clicking on the rate this course (Stars) button that is on you course card inside yor profile page, and typing your review then submitting it.
12. Rate an instructor by clicking on the instructor name on the course card presented in your profile page and typing in your review then submitting it.
13. View all previously submitted problems by clicking on problems tab in the side bar inside your profile page.
14. Follow up on an unresolved problem, by typing in your comment and clicking on add comment button in the problem card to add your follow up.
15. Receive a certificate via mail and download it after you fully complete the course.
16. Logout by clicking on the logout tab in the side bar inside your profile page.



#### As An Instructor You Can
1. View all courses in the welcome page by scrolling down in the page, and can choose your country from the select country component in the navigation bar, in-order to preview the price in realtion to your country's currency.
2. Login using username and password by clicking on the login button in the navigation bar, and then write your username and password and click login to be prompted to the home page.
3. Search for a course by clicking on the search button in the home page an typing in the course name/subject/instructor name.
4. Filter the searched results by price or rating or subject.
5. Click on the course to preview all details about the course and watch its preview video.
6. Search and Filter his own courses by clicking on the profile tab or avatar icon in the navigation bar, and clicking on the courses tab in the side bar, then search using any keyword in the search bar or by filtering the searched result by clicking on the filter button and chossing the filter you want to be applied.
7. Create a new course by clicking on the add course button in the profile page, and filling in all the details related to the course.
8. Add new subtitle by clicking on your course, click on add subtitle button and fill in the subtitle name.
9. Add new video/exam to an existing subtitle, by clicking on the course, clicking on the subtitle, click add new video/add new exam.
10. View all previously submitted problems by clicking on problems tab in the side bar inside your profile page.
11. Follow up on an unresolved problem, by typing in your comment and clicking on add comment button in the problem card to add your follow up.
12. View all reviews of a specific course by clicking on the stars in the course card.
13. View all of trainees' reviews about you by clicking on the reviews tab in the side bar of the profile page.
14. View you monthly salary as money sign under your name in the profile page.



#### As An Admin You Can
1. Create an/a admin/instructor/corporate-trainee by clicking on Add user tab in the side bar, typing in the email/password and then choosing whether you want to add an/a admin/instructor/corporate-trainee by choosing the correct radio button.
2. View all reported problems by clicking on problems tab in the side bar, and you can mark them as pending by clicking on mark as pending button or mark them as resolved by clicking on the mark as resolved button.
3. View all courses access requests by clicking on access requests tab in the side bar, and you can accept or reject the request by clicking on the accept or reject buttons.
4. View all refund requests by clicking on refund requests tab in the side bar, and you can accept or reject the request by clicking on the  accept or reject buttons.






## Credits

 Great websites that helped with debugging and finding solutions to the hinders we faced during the development process :

- [Net Ninja Youtube Channel](https://www.youtube.com/watch?v=98BzS5Oz5E4&list=PL4cUxeGkcC9iJ_KkrkBZWZRHVwnzLIoUE)
- [Monsterlessons Academy - How to Use Youtube API in Node](https://www.youtube.com/watch?v=98BzS5Oz5E4&list=PL4cUxeGkcC9iJ_KkrkBZWZRHVwnzLIoUE)
- [Stack Overflow](https://stackoverflow.com)
- [Geeks for Geeks](geeksforgeeks.org)
- [React Docs.](https://reactjs.org/docs/getting-started.html)
- [Node Docs.](https://nodejs.org/en/docs/)
- [Mongo Docs.](https://www.mongodb.com/docs/)
- [NPM Docs.](https://docs.npmjs.com)
- [MDN](https://developer.mozilla.org/en-US/)


### Huge thanks to the NACLfree team members!
- Nada Abdelfattah (Product Manager)
- Seif Borhan (Scrum Master)
- Hussein Hassan
- Mina Khaled
- Karim Swailum
- Ahmed Karara

## License
[![License](https://img.shields.io/badge/License-Apache_2.0-blue.svg)](https://opensource.org/licenses/Apache-2.0)
- This license is for the use of googleapis.
